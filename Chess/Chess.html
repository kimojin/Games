<!DOCTYPE html>
<html lang = "en">
<head>
	<meta charset = "UTF-8">
	<title>Chess</title>
	<link href = "style.css" rel = "stylesheet">
</head>

<body>
	<h1 class = "title">Chess</h1>
	<div class = "board" id = "chessBoard"></div>
	<div id = "test0"></div>
	<div id = "test1"></div>
	<div id = "test2"></div>
	<div id = "test3"></div>
	
	<script>
		var file = ["a", "b", "c", "d", "e", "f", "g", "h"];
		
		var square = new Array();
		var piece = new Object;
		
		squareObject();
		pieceObject();
		setBoard();
		setPiece();
		
		document.getElementById("test0").innerHTML = piece[31].posCo;
		document.getElementById("test1").innerHTML = piece[31].name;
		document.getElementById("test2").innerHTML = piece[31].code;
		document.getElementById("test3").innerHTML = square[4][6].name;
		
		function squareObject(){
			for(let i = 0; i < 8; i++){
				square[i] = new Object;
			
				for(let j = 0; j < 8; j++){
					square[i][j] = {
						name: `${file[i]}${j + 1}`,
					}
					
					if((i + j) % 2)
						square[i][j].color = "light";
					else
						square[i][j].color = "dark";
				}
			}
		}
		
		function pieceObject(){
			let pieceRole = ["rook", "knight", "bishop", "queen", "king", "bishop", "knight", "rook"];
			let pieceRoleInt = ["R", "N", "B", "Q", "K", "B", "N", "R"];
			let pieceCode = [9814, 9816, 9815, 9813, 9812, 9815, 9816, 9814];
			
			for(let i = 0; i < 8; i++){
				if((i == 3) || (i == 4)){
					piece[i] = {
						name: "white" + pieceRoleInt[i],
						code: `&#${pieceCode[i]}`,
						role: pieceRole[i],
						pos: 10 * (i + 1) + 1,
						posCo: `${file[i]}1`,
						color: "white",
						background: "black",
						onclick: 0,
					}
				
					piece[i + 16] = {
						name: "black" + pieceRoleInt[i],
						code: `&#${pieceCode[i] + 6}`,
						role: pieceRole[i],
						pos: 10 * (i + 1) + 8,
						posCo: `${file[i]}8`,
						color: "black",
						background: "white",
						onclick: 0,
					}
				} else {
					piece[i] = {
						name: "white" + pieceRoleInt[i] + `${Math.floor(i / 4)}`,
						code: `&#${pieceCode[i]}`,
						role: pieceRole[i],
						pos: 10 * (i + 1) + 1,
						posCo: `${file[i]}1`,
						color: "white",
						background: "black",
						onclick: 0,
					}
				
					piece[i + 16] = {
						name: "black" + pieceRoleInt[i] + `${Math.floor(i / 4)}`,
						code: `&#${pieceCode[i] + 6}`,
						role: pieceRole[i],
						pos: 10 * (i + 1) + 8,
						posCo: `${file[i]}8`,
						color: "black",
						background: "white",
						onclick: 0,
					}
				}
				
				piece[i + 8] = {
					name: "whiteP" + `${i}`,
					code: "&#9817",
					role: "pawn",
					pos: 10 * (i + 1) + 2,
					posCoCo: `${file[i]}2`,
					color: "white",
					background: "black",
					onclick: 0,
				}
				
				piece[i + 24] = {
					name: "blackP" + `${i}`,
					code: "&#9823",
					role: "pawn",
					pos: 10 * (i + 1) + 7,
					posCo: `${file[i]}7`,
					color: "black",
					background: "white",
					onclick: 0,
				}
			}
		}
		
		function setBoard(){
			var board = "";
			
			for(let i = 0; i < 8; i++){
				board += '<div class = "rank">';
				
				for(let j = 0; j < 8; j++){
					board += `<div class = "${square[j][7 - i].color} square" id = "${square[j][7 - i].name}">`;
					board += "</div>";
				}
				
				board += "</div>";
			}
			
			document.getElementById("chessBoard").innerHTML = board;
		}
		
		function setPiece(){
			for(let i = 0; i < 32; i++){
				document.getElementById(`${piece[i].posCo}`).innerHTML = `<button type = "button" class = "pieceCont" id = "${i}" onclick = "clickPiece(this.id)">${piece[i].code}`;
				document.getElementById(`${piece[i].posCo}`).innerHTML += "</div>";
			}
		}
		
		function clickPiece(p){
			if(piece[p].onclick){
				document.getElementById(`${p}`).classList.remove("onclick");
				piece[p].onclick = 0;
			} else{
				document.getElementById(`${p}`).classList.add("onclick");
				piece[p].onclick = 1;
			}
		}
	</script>
	
</body>
</html>
