<!DOCTYPE = html>
<html lang = "en">

<head>
	<meta charset = "UTF-8">
	<link rel = "stylesheet" href = "style.css">
	<link rel = "icon" href = "favicon.jpeg">
</head>

<body>
	<div class = "board" id = "board"></div>
	
	<script>
		var board = new Object;
		var square = new Object;
		var piece = new Object;
		var file = ["a", "b", "c", "d", "e", "f", "g", "h"];
		var rank = ["1", "2", "3", "4", "5", "6", "7", "8"];
		var click = 0;
		
		setBoard();
		initSquare();
		initPiece();
		sync();
		
		function setBoard(){
			let cont = "";
			let color = ["dark", "light"];
			
			for(let r = 7; r >= 0; r--){
				for(let f = 0; f < 8; f++){
					cont += `<div class = "${color[(r + f) % 2]} square" id = "${file[f]}${rank[r]}">`;
					cont += "</div>";
				}
			}
			
			document.getElementById("board").innerHTML = cont;
			
			return 0;
		}
		
		function setPiece(){
			
		}
		
		function initSquare(){
			for(let r = 0; r < 8; r++){
				for(let f = 0; f < 8; f++){
					square[r * 8 + f] = {
						name: `${file[f]}${r + 1}`,
						piece: 0,
						threatW: 0,
						threatB: 0
					}
				}
			}
			
			return 0;
		}
		
		function initPiece(){
			let role = ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R', 'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'];
			let code = [2, 4, 3, 1, 0, 3, 4, 2];
			
			for(i = 1; i < 9; i++){
				piece[i] = {
					role: `${role[i]}`,
					code: `&#${9812 + code[i - 1]}`,
					color: 0,
					file: i - 1,
					rank: 0
				}
			}
			
			for(i = 9; i < 17; i++){
				piece[i] = {
					role: `${role[i]}`,
					code: `&#${9812 + code[i + 7]}`,
					color: 1,
					file: i - 9,
					rank: 7
				}
			}
			
			for(i = 17; i < 25; i++){
				piece[i] = {
					role: "P",
					code: "&#9817",
					color: 0,
					file: i - 17,
					rank: 1
				}
			}
			
			for(i = 25; i < 33; i++){
				piece[i] = {
					role: "p",
					code: "&#9823",
					color: 1,
					file: i - 25,
					rank: 6
				}
			}
			
			return 0;
		}
		
		function sync(){
			let r, f;
			
			for(i = 1; i < 33; i++){
				r = piece[i].rank;
				f = piece[i].file;
				
				square[r * 8 + f].piece = i;
			}
			
			return 0;
		}
		
	</script>
</body>

</html>