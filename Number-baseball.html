<!DOCTYPE html>
<html lang = "en">

<head>
	<meta charset = "UTF-8" />
	<title>
		Number Baseball
	</title>
	
	<style>
		input[type = "number"]{
			width: 20px;
		}
	</style>
</head>

<body>
	<h1>
		Number Baseball
	</h1>
	<hr>
	
	<form>
		<input type = "button" id = "newGame" value = "New Game" onclick = "newGame()">
		<div id = "totalRound"></div>
		<br>
		<label for = "digit-1">Enter Numbers:</label>
		<input type="number" id="digit-1" name="digit-1" data-next="digit-2" maxlength="1"/>
		<input type="number" id="digit-2" name="digit-2" data-next="digit-3" data-previous="digit-1" maxlength="1" size = "1"/>
		<input type="number" id="digit-3" name="digit-3" data-next="digit-4" data-previous="digit-2" maxlength="1" size = "1"/>
		<input type="number" id="digit-4" name="digit-4" data-previous="digit-3" maxlength="1" size = "1"/>
		<input type = "button" id = "pitchButton" value = "pitch" onclick = "pitchBall()">
	</form>
	
	<hr>
	
	<div id = "display"></div>
	
	<script>
		var arrNo = new Array();
		var arrAns = new Array();
		var arrInput = new Array();
		var round, content;
		var pitchInput = document.getElementById("pitch");
		
		newGame();
		
		function newGame(){
			let i;
			
			for(i = 0; i < 10; i++){
				arrNo[i] = i;
			}
			
			round = 0;
			content = "";
			
			document.getElementById("totalRound").innerHTML = `total round: ${round}`;
			document.getElementById("display").innerHTML = "";
			
			arrAns.length = 4;
			newAnswer();
			
			return;
		}
		
		function newAnswer(){
			let i, j, r;
			
			for(i = 0; i < arrAns.length; i++){
				r = Math.floor(Math.random() * (10 - i));
				arrAns[i] = arrNo[r];
				
				for(j = r; j < arrNo.length - 1; j++){
					arrNo[j] = arrNo[j + 1];
				}
				
				arrNo.length -= 1;
			}
			
			return;
		}
		
		function pitchBall(){
			let strike = 0, ball = 0;
			
			++round;
			
			for(let i = 0; i < arrAns.length; i++){
				arrInput[i] = document.getElementById("digit-" + (i + 1)).value;
			}
			
			for(let i = 0; i < arrAns.length; i++){
				for(let j = 1; i + j < arrAns.length; j++){
					if (arrInput[i] == arrInput[i + j]){
						alert("The digits cannot be repeated!");
						resetDigit();
						
						return;
					}
				}
			}
			
			for(let i = 0; i < arrAns.length; i++){
				content += arrInput[i] + "&nbsp";
			}
			
			for(let i = 0; i < arrAns.length; i++){
				for(let j = 0; j < arrAns.length; j++){
					if(arrInput[i] == arrAns[j]){
						if(i == j)
							++strike;
						else
							++ball;
							
						break;
					}
				}
			}
			
			if(strike == arrAns.length)
				content += `:<br>${arrAns.length} Strike! You won the game.<br>total round = ${round}<br><br>`;
			else if((strike == 0) && (ball == 0))
				content += `:<br>Out!<br><br>`;
			else
				content += `:<br>${strike} Strike, ${ball} Ball<br><br>`;
			
			document.getElementById("totalRound").innerHTML = `total round: ${round}`;
			document.getElementById("display").innerHTML = content;
			
			resetDigit();
			
			return;
		}
		
		function resetDigit(){
			for(let i = 0; i < arrAns.length; i++){
				document.getElementById("digit-" + (i + 1)).value = "";
			}
			
			return;
		}
		
		
	</script>
</body>

</html>